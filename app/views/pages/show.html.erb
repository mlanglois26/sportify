<div class="container" data-controller="dashboard">
  <div class="mb-5 mt-3 d-flex align-items-center">
    <% if current_user.photo.attached? %>
      <%= cl_image_tag current_user.photo.key, class: "avatar-large me-2", crop: :fill %>
    <% else %>
      <%= image_tag "https://images.unsplash.com/photo-1511367461989-f85a21fda167?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NTR8fGJsZXV8ZW58MHx8MHx8&auto=format&fit=crop&w=800&q=60", class: "avatar-large me-2" %>
    <% end %>
    <h1 class="m-0">Hello <%= current_user.first_name %></h1>
  </div>

  <button id="client" class="active btn btn-ligth" data-action="click->dashboard#client" data-dashboard-target="btnClient">client</button>
  <button id="owner"  class="btn btn-ligth" data-action="click->dashboard#owner" data-dashboard-target="btnOwner">owner</button>

  <div class="border-bottom mb-3" data-dashboard-target="client">
    <div class="mb-5">
      <div class="d-flex">
        <h2>My current rent (<%= @current_rent.length %>)</h2>
        <%= link_to root_path do %>
          <button type="button" class="btn btn-light">Search a rent</button>
        <% end %>
      </div>
      <%= render "pages/list_of_bookings", bookings: @current_rent %>
    </div>

    <div class="mb-5">
      <div class="d-flex">
        <h2>My previous rent (<%= @previous_rent.length %>)</h2>
      </div>
      <%= render "pages/list_of_bookings", bookings: @previous_rent %>
    </div>
  </div>

  <div class="d-none" data-dashboard-target="owner">

    <%= render "pages/demands_of_bookings", bookings_pending: @bookings_pending %>

    <h2> My products in rent (<%= @bookings.length %>)</h2>
    <div class="row mb-5">
      <%= render "pages/list_of_bookings", bookings: @bookings_accepted %>
    </div>

    <h2> Historic (<%= @bookings.length %>)</h2>
    <div class="row mb-5">
      <%= render "pages/list_of_bookings", bookings: @bookings_passed %>
    </div>

    <div class="d-flex">
      <h2>All my products (<%= @products.length %>)</h2>
      <%= link_to new_product_path do %>
        <button type="button" class="btn btn-light">Add a new product</button>
      <% end %>
    </div>


    <div class="row mb-5">
      <%= render 'products/carousel', products: @products %>
    </div>
  </div>
</div>
